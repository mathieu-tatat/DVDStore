{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/home.service\";\nimport * as i3 from \"@angular/common\";\nfunction HomeComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"a\", 4);\n    i0.ɵɵelement(3, \"img\", 5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 6)(5, \"a\", 4)(6, \"h5\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"p\")(9, \"a\", 4)(10, \"span\", 8);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 9)(13, \"p\")(14, \"a\", 4)(15, \"span\", 10);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"p\", 11);\n    i0.ɵɵtext(18, \"\\u20AC\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 12)(20, \"p\")(21, \"span\", 13);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"div\", 14)(24, \"p\")(25, \"span\", 15)(26, \"a\", 4);\n    i0.ɵɵtext(27, \"voir +\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const dvds_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/newdvd/?filter=\", dvds_r1.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", dvds_r1.photo, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/newdvd/?filter=\", dvds_r1.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dvds_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/newdvd/?filter=\", dvds_r1.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", dvds_r1.genre, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/newdvd/?filter=\", dvds_r1.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dvds_r1.prix);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(\"stock: \" + dvds_r1.quantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/newdvd/?filter=\", dvds_r1.id, \"\", i0.ɵɵsanitizeUrl);\n  }\n}\nexport class HomeComponent {\n  constructor(router, homeService, route) {\n    this.router = router;\n    this.homeService = homeService;\n    this.route = route;\n    this.dvds = [];\n    this.genre = '';\n    this.router.events.subscribe(val => {\n      if (val.url) {\n        var genre1 = val.url.split('=')[1];\n        this.genre = genre1;\n      }\n    });\n  }\n  ngAfterContentInit() {\n    this.homeService.getAll().subscribe(data => {\n      this.dvds = data;\n      this.dvds.map(dvds => ({\n        ...dvds,\n        pathPhoto: dvds.pathPhoto ? dvds.pathPhoto.replace(/\\\\/g, '/') : undefined\n      }));\n      if (this.genre) this.filterDvdsByGenre(this.genre);\n    });\n  }\n  filterByGenre() {\n    this.route.params.subscribe(params => {\n      const genre = params['genre'];\n      if (this.router.url.endsWith(genre)) {\n        this.filterDvdsByGenre(genre);\n      } else {\n        \"aucun dvd ne correspond à ce genre\";\n      }\n    });\n  }\n  filterDvdsByGenre(genre) {\n    console.log(genre);\n    console.log(this.dvds);\n    this.dvds = this.dvds.filter(value => value.genre === genre);\n  }\n}\n_class = HomeComponent;\n_class.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HomeService), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-home\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[1, \"absolute\", \"h-124\", \"flex\", \"flex-wrap\", \"justify-between\", \"w-9/12\", \"ml-80\", \"top-64\", \"overflow-hidden\", \"overflow-scroll\"], [\"class\", \" flex w-80 h-60 max-w-xs mb-12 overflow-hidden justify-center rounded-lg border border-fumee bg-fumee shadow-md\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"w-80\", \"h-60\", \"max-w-xs\", \"mb-12\", \"overflow-hidden\", \"justify-center\", \"rounded-lg\", \"border\", \"border-fumee\", \"bg-fumee\", \"shadow-md\"], [1, \"w-1/2\", \"relative\", \"mx-auto\", \"justify-center\", \"flex\", \"h-60\", \"overflow-hidden\", \"rounded-xl\"], [3, \"href\"], [\"alt\", \"image jacket\", 1, \"object-cover\", 3, \"src\"], [1, \"px-2\", \"w-1/2\", \"flex\", \"flex-col\"], [1, \"tracking-tight\", \"text-slate-900\", \"text-xl\", \"flex\", \"justify-center\", \"font-semibold\", \"mt-16\", \"mb-2\"], [1, \"text-basic-400\", \"flex\", \"text-s\", \"justify-center\", \"mb-8\"], [1, \"flex\", \"bg-granny-400\", \"rounded-full\", \"ml-16\", \"w-16\", \"justify-end\", \"border-solid\", \"border-2\", \"border-basic-400\"], [1, \"text-fumee\", \"text-l\", \"font-bold\", \"text-slate-900\"], [1, \"relative\", \"flex\", \"left-4\"], [1, \"flex\", \"items-center\", \"justify-end\"], [1, \"text-xs\", \"text-slate-900\"], [1, \"flex\", \"items-center\", \"justify-start\"], [1, \"text-xs\", \"text-slate-900\", \"font-bold\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, HomeComponent_div_1_Template, 28, 10, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.dvds);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJob21lLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLGdLQUFnSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵpropertyInterpolate1","dvds_r1","id","ɵɵsanitizeUrl","ɵɵpropertyInterpolate","photo","ɵɵtextInterpolate","name","ɵɵtextInterpolate1","genre","prix","quantity","HomeComponent","constructor","router","homeService","route","dvds","events","subscribe","val","url","genre1","split","ngAfterContentInit","getAll","data","map","pathPhoto","replace","undefined","filterDvdsByGenre","filterByGenre","params","endsWith","console","log","filter","value","ɵɵdirectiveInject","i1","Router","i2","HomeService","ActivatedRoute","selectors","decls","vars","consts","template","HomeComponent_Template","rf","ctx","ɵɵtemplate","HomeComponent_div_1_Template","ɵɵproperty"],"sources":["/Users/mathieutatat/IdeaProjects/DVDStore/front/src/app/home/home.component.ts","/Users/mathieutatat/IdeaProjects/DVDStore/front/src/app/home/home.component.html"],"sourcesContent":["import { AfterContentInit, AfterViewInit, Component,OnChanges,OnInit, SimpleChanges } from '@angular/core';\nimport { HomeService } from '../services/home.service';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nexport interface Dvd{  \n  name : string,\n  genre : string,\n  quantity : number,\n  prix: number; \n  photo: string;\n  description: string;\n  id? : number,\n}\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\n\nexport class HomeComponent {\n\n  dvds: any[] = []\n  genre: string='';\n\n\n  constructor(private router: Router, private homeService: HomeService, private route:ActivatedRoute,) {\n    this.router.events.subscribe( (val: any) => {\n      if(val.url){\n      var genre1 = val.url.split('=')[1];\n      this.genre=genre1;\n      }});\n      \n    \n  }\n  \n\n  ngAfterContentInit(): void {\n    this.homeService.getAll().subscribe(data=> {\n      this.dvds = data;\n  \n      this.dvds.map((dvds: any) => ({\n        ...dvds,\n        pathPhoto: dvds.pathPhoto ? dvds.pathPhoto.replace(/\\\\/g, '/') : undefined\n      }));\n      if(this.genre)\n      this.filterDvdsByGenre(this.genre);   \n    })\n  }\n  \n  \n\nfilterByGenre() {\n  \n  this.route.params.subscribe(params => {\n    const genre = params['genre'];\n    if (this.router.url.endsWith(genre)){\n      this.filterDvdsByGenre(genre);\n      \n    } else {\n        \"aucun dvd ne correspond à ce genre\"\n    }\n  });\n}\n\nfilterDvdsByGenre(genre: string) {\n  console.log(genre);\n  console.log(this.dvds);\nthis.dvds = this.dvds.filter(value => value.genre === genre);\n}\n    \n}\n\n/* a mettre dans une fonction qui capte les changements dans l'url\n  this.dvds = this.dvds.filter((value) => {\n    return value.genre === genre\n  })\n  */\n\n/*\n  ngOnInit() {\n    this.homeService.getAll().subscribe(data=> {\n      this.dvd = data;\n\n      this.dvd.map((dvds: any) => ({\n        ...dvds,\n        pathPhoto: dvds.pathPhoto ? dvds.pathPhoto.replace(/\\\\/g, '/') : undefined\n      \n      }))\n      ;\n  \n  }\n  )\n  }\n*/","<div class=\"absolute h-124 flex flex-wrap  justify-between w-9/12  ml-80 top-64 overflow-hidden overflow-scroll \">\n\n  <!-- first card -->\n  <div *ngFor=\"let dvds of dvds\" class=\" flex w-80 h-60 max-w-xs mb-12 overflow-hidden justify-center rounded-lg border border-fumee bg-fumee shadow-md\" >\n    \n    <div class=\"w-1/2 relative mx-auto justify-center flex h-60 overflow-hidden rounded-xl\"> \n      <a href=\"/newdvd/?filter={{dvds.id}}\"><img class=\"object-cover\" src=\"{{dvds.photo}}\" alt=\"image jacket\"></a>\n    </div>\n\n    <div class=\" px-2 w-1/2 flex flex-col  \">\n      <a href=\"/newdvd/?filter={{dvds.id}}\"><h5 class=\" tracking-tight text-slate-900 text-xl flex justify-center font-semibold mt-16 mb-2\" >{{dvds.name}}</h5></a>\n      <p>\n        <a href=\"/newdvd/?filter={{dvds.id}}\"><span class=\" text-basic-400 flex text-s justify-center mb-8\">{{dvds.genre}} </span></a>\n      </p>\n      <div class=\" flex bg-granny-400 rounded-full ml-16 w-16 justify-end border-solid border-2 border-basic-400\">\n        <p>\n          <a href=\"/newdvd/?filter={{dvds.id}}\"><span class=\" text-fumee text-l font-bold text-slate-900\">{{dvds.prix}}</span></a>\n        </p>\n        <p class=\"relative flex left-4\">€</p>\n      </div>\n      <div class=\"flex items-center justify-end\">\n        <p>\n          <span class=\"text-xs text-slate-900\">{{'stock: '+dvds.quantity}}</span>\n        </p>\n      </div>\n      <div class=\"flex items-center justify-start\">\n        <p>\n          <span class=\"text-xs text-slate-900 font-bold\"><a href=\"/newdvd/?filter={{dvds.id}}\">voir +</a></span>\n        </p>\n      </div>\n    </div>\n  </div>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}